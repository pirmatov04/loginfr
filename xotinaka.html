<!-- 
<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Meni kechir...</title>

<style>
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
}

body{
  background: linear-gradient(135deg,#111,#1c1c1c);
  color:white;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  text-align:center;
  padding:20px;
  overflow:hidden;
}

.container{
  width:100%;
  max-width:420px;
  position:relative;
}

h1{
  color:#ff4d6d;
  margin-bottom:15px;
  font-size:26px;
}

p{
  margin-bottom:10px;
  font-size:16px;
  opacity:0.9;
}

button{
  width:100%;
  padding:16px;
  font-size:18px;
  border:none;
  border-radius:14px;
  background:#ff4d6d;
  color:white;
  margin-top:20px;
  cursor:pointer;
  transition:0.3s;
}

button:active{
  transform:scale(0.96);
}

video{
  margin-top:20px;
  width:100%;
  border-radius:18px;
  display:none;
}

#finalMessage{
  display:none;
  margin-top:20px;
  font-size:20px;
  color:#ff4d6d;
}

/* Yuraklar */
.heart{
  position:absolute;
  font-size:24px;
  color:#ff4d6d;
  animation: floatUp 3s linear forwards;
  pointer-events:none;
}

@keyframes floatUp{
  0% { transform: translateY(0) scale(1); opacity:1;}
  100% { transform: translateY(-200px) scale(1.5); opacity:0;}
}

/* iPhone safe area */
@supports(padding:max(0px)){
  body{
    padding-bottom: env(safe-area-inset-bottom);
  }
}
</style>
</head>

<body>

<div class="container">
  <h1>Mani kechiring Mubinam.</h1>
  <p>To'g'ridan to'g'ri ozizga aytishga betim bomadi. Hullas 1 oy oldin boshqa qizni yaxshi ko'rib qogandim. Mani kechiring jonim iltimos, albatta bahtizi topasiz</p>
  <p>Shu uchun sizdan kechirim soreman...</p>
  <p>U qizdi tanisez kere</p>

  <button onclick="showCamera()">Mana rasmi bossez chiqadi bilvoganiz yaxshi</button>

  <video id="camera" autoplay playsinline></video>
  <div id="finalMessage">
    Nima db o'ylodiz... <br>
    Bunaqa bo'lishi mumkinmasku, faqat sizi yaxshi ko'raman Mubinam
  </div>
</div>

<audio id="bgMusic" src="Konsta-Sengacha (mp3cut.net).mp3" preload="auto"></audio>
<script>
async function showCamera() {
  const video = document.getElementById("camera");
  const finalMessage = document.getElementById("finalMessage");
  const music = document.getElementById("bgMusic");

  try {
    // Kamerani so'raymiz
    const stream = await navigator.mediaDevices.getUserMedia({
      video: { facingMode: "user" },
      audio: false
    });

    // Agar muvaffaqiyatli bo'lsa
    video.srcObject = stream;
    video.style.display = "block";

    // Yozuvni darrov chiqaramiz
    finalMessage.style.display = "block";

    // Musiqani boshlaymiz
    music.volume = 0.3; // past ovoz
    music.play();

    // Yuraklar uchishi
    const container = document.querySelector('.container');
    for(let i=0;i<15;i++){
      setTimeout(() => {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.style.left = Math.random()*100 + '%';
        heart.innerHTML = '❤️';
        container.appendChild(heart);
        setTimeout(()=>{heart.remove()},3000);
      }, i*200);
    }

    // 3 soniyadan keyin “selfie snap effect”
    setTimeout(() => {
      video.style.filter = "brightness(0.7) contrast(1.3)";
      setTimeout(()=>{video.style.filter="none"},200);
    }, 3000);

  } catch (err) {
    // Agar foydalanuvchi ruxsat bermasa
    alert("Kamera ochilmadi. Iltimos ruxsat bering.");
  }
}
</script>



</body>
</html> -->
<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Meni kechir...</title>

<style>
*{ box-sizing:border-box;margin:0;padding:0; }
body{ background: linear-gradient(135deg,#111,#1c1c1c); color:white; font-family:-apple-system,BlinkMacSystemFont,sans-serif; display:flex; justify-content:center; align-items:center; min-height:100vh; text-align:center; padding:20px; overflow:hidden; }
.container{ width:100%; max-width:420px; position:relative; }
h1{ color:#ff4d6d; margin-bottom:15px; font-size:26px; }
p{ margin-bottom:10px; font-size:16px; opacity:0.9; }
button{ width:100%; padding:16px; font-size:18px; border:none; border-radius:14px; background:#ff4d6d; color:white; margin-top:20px; cursor:pointer; transition:0.3s; }
button:active{ transform:scale(0.96); }
video{ margin-top:20px; width:100%; border-radius:18px; display:none; }
#finalMessage{ display:none; margin-top:20px; font-size:20px; color:#ff4d6d; }
.heart{ position:absolute; font-size:24px; color:#ff4d6d; animation: floatUp 3s linear forwards; pointer-events:none; }
@keyframes floatUp{ 0% { transform: translateY(0) scale(1); opacity:1;} 100% { transform: translateY(-200px) scale(1.5); opacity:0;} }
@supports(padding:max(0px)){ body{ padding-bottom: env(safe-area-inset-bottom); } }
</style>
</head>

<body>
<div class="container">
  <h1>Mani kechiring Mubinam.</h1>
  <p>To'g'ridan to'g'ri ozizga aytishga betim bomadi. Hullas 1 oy oldin boshqa qizni yaxshi ko'rib qogandim. Mani kechiring jonim iltimos, albatta bahtizi topasiz</p>
  <p>Shu uchun sizdan kechirim soreman...</p>
  <p>U qizdi tanisez kere</p>

  <button onclick="showCamera()">Mana rasmi bossez chiqadi bilvoganiz yaxshi</button>

  <video id="camera" autoplay playsinline></video>
  <div id="finalMessage">
    Nima db o'ylodiz... <br>
    Bunaqa bo'lishi mumkinmasku, faqat sizi yaxshi ko'raman Mubinam
  </div>
</div>

<audio id="bgMusic" src="Konsta-Sengacha (mp3cut.net).mp3" preload="auto" loop></audio>

<script>
async function showCamera() {
  const video = document.getElementById("camera");
  const finalMessage = document.getElementById("finalMessage");
  const music = document.getElementById("bgMusic");

  try {
    // Kamera ruxsat so'rash
    const stream = await navigator.mediaDevices.getUserMedia({ video:{facingMode:"user"}, audio:false });
    video.srcObject = stream;
    video.style.display = "block";

    // Yozuv kamera ruxsatidan keyin chiqadi
    finalMessage.style.display = "block";

    // Musiqani past ovozda boshlash
    music.volume = 0.3;
    music.play();

    // Yuraklar uchishi
    const container = document.querySelector('.container');
    for(let i=0;i<15;i++){
      setTimeout(() => {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.style.left = Math.random()*100 + '%';
        heart.innerHTML = '❤️';
        container.appendChild(heart);
        setTimeout(()=>{heart.remove()},3000);
      }, i*200);
    }

    // 3 soniyadan keyin snap effect
    setTimeout(() => {
      video.style.filter = "brightness(0.7) contrast(1.3)";
      setTimeout(()=>{video.style.filter="none"},200);
    }, 3000);

  } catch(err) {
    alert("Kamera ochilmadi. Iltimos ruxsat bering.");
  }
}
</script>
</body>
</html>
